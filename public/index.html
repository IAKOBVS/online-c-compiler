<!DOCTYPE html>
<html>
	<head>
		<title>Online C Compiler</title>
	</head>
	<body>
		<h1>Online C Compiler</h1>
		<h2>Compiler:</h2>
		<select name="Compilers" id="compilerInput">
			<option value="gcc">gcc</option>
			<option value="clang">clang</option>
		</select>
		<h2>Flags:</h2>
		<textarea type="text" id="flagInput">-Wall -Wextra</textarea>
		<br />
		<h2>Source code:</h2>
		<textarea type="text" id="textInput" rows="20" cols="100">
int main()
{
    return 0;
}</textarea
		>
		<button id="submitButton">Compile</button>
		<div id="output"></div>
		<script>
			const submitButton = document.getElementById("submitButton");
			const compilerInput = document.getElementById("compilerInput");
			const flagInput = document.getElementById("flagInput");
			const textInput = document.getElementById("textInput");
			const output = document.getElementById("output");

			submitButton.addEventListener("click", () => {
				const compiler = compilerInput.value;
				const flag = flagInput.value;
				const text = textInput.value;

				// send input to server for processing
				fetch("/compile", {
					method: "POST",
					headers: {
						"Content-Type": "application/json",
					},
					body: JSON.stringify({ compiler, flag, text }),
				})
					.then((response) => response.text())
					.then((data) => {
						// display output from server
						output.innerHTML = data;
					})
					.catch((error) => {
						console.error("Error:", error);
					});
			});
		</script>
	</body>
</html>
